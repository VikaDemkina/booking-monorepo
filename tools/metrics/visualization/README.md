# Визуализация метрик CI/CD

Эта директория содержит инструменты для визуализации метрик CI/CD, собранных в процессе сборки и деплоя проекта.

## Быстрый старт

### 1. Самый простой способ - Использование local-test.html

Этот файл содержит встроенные демо-данные и работает без каких-либо внешних зависимостей:

1. Откройте файл `local-test.html` в любом браузере двойным щелчком
2. Готово! Вы увидите страницу с визуализацией демо-данных

### 2. Визуализация реальных данных

Чтобы увидеть ваши реальные данные метрик:

1. Скопируйте файлы из корневой директории `metrics-data` в директорию `tools/metrics/visualization/sample-data/`:
   ```bash
   cp ../../../../metrics-data/build-metrics.json sample-data/
   cp ../../../../metrics-data/deploy-metrics.json sample-data/
   ```

2. Откройте файл `local-test.html` в браузере
   
3. Страница автоматически загрузит ваши реальные данные и покажет соответствующую статистику

## Варианты использования

В директории есть несколько HTML-файлов для разных сценариев использования:

### 1. `local-test.html` (рекомендуется)
- Простой и надежный вариант для просмотра метрик
- Работает полностью автономно, без зависимостей
- Включает встроенные демо-данные, если реальные метрики недоступны
- **Использование**: просто откройте файл в браузере

### 2. `visualization.html`
- Версия с более компактным кодом
- Также работает автономно, без внешних зависимостей
- **Использование**: откройте файл в браузере

### 3. `index.html`
- Более продвинутая версия с графиками и дополнительными функциями
- Требует подключения к интернету для загрузки внешних библиотек
- **Использование**: запустите через локальный веб-сервер (см. ниже)

## Использование через локальный веб-сервер

Для корректной работы с `index.html` (версия с графиками) рекомендуется использовать локальный веб-сервер:

### С помощью Python:

```bash
# Из директории visualization
python -m http.server 8000

# Затем откройте в браузере:
# http://localhost:8000/
```

### С помощью Node.js:

```bash
# Установка сервера
npm install -g http-server

# Запуск сервера из директории visualization
http-server -p 8000

# Затем откройте в браузере:
# http://localhost:8000/
```

## Структура метрик

### Метрики сборки (`build-metrics.json`)

```json
[
  {
    "buildTime": 45000,       // Время сборки в миллисекундах
    "timestamp": "2025-05-08T12:00:00Z",  // Дата и время сборки
    "commitHash": "abcdef123456789"       // Хеш коммита
  },
  // ...
]
```

### Метрики деплоя (`deploy-metrics.json`)

```json
[
  {
    "commitHash": "abcdef123456789",       // Хеш коммита
    "commitTime": 1746813600000,           // Время коммита в миллисекундах
    "deployFinishTime": 1746814500000,     // Время завершения деплоя в миллисекундах
    "commitToDeployTime": 900000,          // Время от коммита до деплоя в миллисекундах
    "timestamp": "2025-05-08T12:05:00Z"    // Дата и время записи метрики
  },
  // ...
]
```

## Решение проблем

### Страница не загружается или не отображает данные

1. **Попробуйте `local-test.html`**: Это наиболее простой и надежный вариант
2. **Проверьте пути к файлам**: Убедитесь, что метрики находятся в правильной директории
3. **Проверьте формат JSON**: Убедитесь, что файлы метрик содержат корректный JSON

### Ошибки в консоли браузера (для index.html)

1. **Проблемы с CORS**: Запустите через локальный веб-сервер вместо прямого открытия файла
2. **Отсутствие внешних библиотек**: Убедитесь, что у вас есть подключение к интернету

## Расширение функциональности

Вы можете доработать визуализацию:

1. Добавить дополнительные типы графиков (гистограммы, круговые диаграммы и т.д.)
2. Реализовать фильтрацию и сортировку данных
3. Добавить экспорт данных в CSV или Excel
4. Интегрировать с другими инструментами мониторинга
